<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html">
<head>
<meta charset="UTF-8" />
<title>A1E-3061</title>
</head>
<body>

    <h1>Reproducible</h1>

    <p>
        Both buttons trigger an action annotated with <strong>@Transactional</strong>. While both methods worked with <strong>EAP 7.1.x</strong> one of them now fails with <strong>EAP 7.2.x
            or 7.3.x</strong>!
    </p>

    <h2>This one fails with an TransactionRequiredException!</h2>
    <h:form>
        <h:commandButton value="Flush EntityManager #1 (Application-managed)" action="#{myBean.save1()}" style="font-size:1rem; padding:.5rem 1rem; background-color:#f008;" />
    </h:form>

    <h2>This one works as expected!</h2>
    <h:form>
        <h:commandButton value="Flush EntityManager #2 (Container-managed)" action="#{myBean.save2()}" style="font-size:1rem; padding:.5rem 1rem; background-color:#0a08;" />
    </h:form>

</body>
</html>